name: vxlan-ebgp-multias

topology:
  kinds:
    ceos:
      image: ceos:4.34.1F
      startup-config: configs/startup-config.cfg
    linux:
      image: alpine:latest

  nodes:
    # Spine switches (AS 12)
    spine1:
      kind: ceos
      startup-config: configs/spine1.cfg
      mgmt-ipv4: 172.20.20.11
      
    spine2:
      kind: ceos
      startup-config: configs/spine2.cfg
      mgmt-ipv4: 172.20.20.12
      
    # Leaf switches (AS 2, 3, 4)
    leaf1:
      kind: ceos
      startup-config: configs/leaf1.cfg
      mgmt-ipv4: 172.20.20.21
      
    leaf2:
      kind: ceos
      startup-config: configs/leaf2.cfg
      mgmt-ipv4: 172.20.20.22
      
    leaf3:
      kind: ceos
      startup-config: configs/leaf3.cfg
      mgmt-ipv4: 172.20.20.23
      
    # End hosts
    host1:
      kind: linux
      image: alpine:latest
      mgmt-ipv4: 172.20.20.101
      
    host2:
      kind: linux
      image: alpine:latest
      mgmt-ipv4: 172.20.20.102
      
    host3:
      kind: linux
      image: alpine:latest
      mgmt-ipv4: 172.20.20.103

  links:
    # Spine1 to Leaf connections
    - endpoints: ["spine1:eth1", "leaf1:eth1"]
    - endpoints: ["spine1:eth2", "leaf2:eth1"]
    - endpoints: ["spine1:eth3", "leaf3:eth1"]
    
    # Spine2 to Leaf connections
    - endpoints: ["spine2:eth1", "leaf1:eth2"]
    - endpoints: ["spine2:eth2", "leaf2:eth2"]
    - endpoints: ["spine2:eth3", "leaf3:eth2"]
    
    # Leaf to Host connections
    - endpoints: ["leaf1:eth3", "host1:eth1"]
    - endpoints: ["leaf2:eth3", "host2:eth1"]
    - endpoints: ["leaf3:eth3", "host3:eth1"]
